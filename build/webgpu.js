!function(e){var t={};function r(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(i,s,function(t){return e[t]}.bind(null,s));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(1),s=document.getElementById("gfx");s.width=s.height=640,new i.default(s).start()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=new Float32Array([1,-1,0,-1,-1,0,0,1,0]),s=new Float32Array([1,0,0,0,1,0,0,0,1]),a=new Uint16Array([0,1,2]);t.default=class{constructor(e){this.render=()=>{this.colorTexture=this.swapchain.getCurrentTexture(),this.colorTextureView=this.colorTexture.createView(),this.encodeCommands(),requestAnimationFrame(this.render)},this.canvas=e}async start(){await this.initializeAPI()&&(this.resizeBackings(),await this.initializeResources(),this.render())}async initializeAPI(){try{const e=navigator.gpu;if(!e)return!1;this.adapter=await e.requestAdapter(),this.device=await this.adapter.requestDevice(),this.queue=this.device.defaultQueue}catch(e){return console.error(e),!1}return!0}async initializeResources(){let e=(e,t)=>{let r={size:e.byteLength,usage:t},[i,s]=this.device.createBufferMapped(r);return(e instanceof Uint16Array?new Uint16Array(s):new Float32Array(s)).set(e),i.unmap(),i};this.positionBuffer=e(i,GPUBufferUsage.VERTEX),this.colorBuffer=e(s,GPUBufferUsage.VERTEX),this.indexBuffer=e(a,GPUBufferUsage.INDEX);let t=e=>fetch(new Request(e),{method:"GET",mode:"cors"}).then(e=>e.arrayBuffer().then(e=>new Uint32Array(e)));const r={code:await t("/assets/shaders/triangle.vert.spv")};this.vertModule=this.device.createShaderModule(r);const n={code:await t("/assets/shaders/triangle.frag.spv")};this.fragModule=this.device.createShaderModule(n);const o={indexFormat:"uint16",vertexBuffers:[{attributes:[{shaderLocation:0,offset:0,format:"float3"}],arrayStride:12,stepMode:"vertex"},{attributes:[{shaderLocation:1,offset:0,format:"float3"}],arrayStride:12,stepMode:"vertex"}]},c={layout:this.device.createPipelineLayout({bindGroupLayouts:[]}),vertexStage:{module:this.vertModule,entryPoint:"main"},fragmentStage:{module:this.fragModule,entryPoint:"main"},primitiveTopology:"triangle-list",colorStates:[{format:"bgra8unorm",alphaBlend:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},colorBlend:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},writeMask:GPUColorWrite.ALL}],depthStencilState:{depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus-stencil8"},vertexState:o,rasterizationState:{frontFace:"cw",cullMode:"none"}};this.pipeline=this.device.createRenderPipeline(c)}resizeBackings(){if(!this.swapchain){const e=this.canvas.getContext("gpupresent"),t={device:this.device,format:"bgra8unorm",usage:GPUTextureUsage.OUTPUT_ATTACHMENT|GPUTextureUsage.COPY_SRC};this.swapchain=e.configureSwapChain(t)}const e={size:{width:this.canvas.width,height:this.canvas.height,depth:1},arrayLayerCount:1,mipLevelCount:1,sampleCount:1,dimension:"2d",format:"depth24plus-stencil8",usage:GPUTextureUsage.OUTPUT_ATTACHMENT|GPUTextureUsage.COPY_SRC};this.depthTexture=this.device.createTexture(e),this.depthTextureView=this.depthTexture.createView()}encodeCommands(){const e={colorAttachments:[{attachment:this.colorTextureView,loadValue:{r:0,g:0,b:0,a:1},storeOp:"store"}],depthStencilAttachment:{attachment:this.depthTextureView,depthLoadValue:1,depthStoreOp:"store",stencilLoadValue:"load",stencilStoreOp:"store"}};this.commandEncoder=this.device.createCommandEncoder(),this.passEncoder=this.commandEncoder.beginRenderPass(e),this.passEncoder.setPipeline(this.pipeline),this.passEncoder.setViewport(0,0,this.canvas.width,this.canvas.height,0,1),this.passEncoder.setScissorRect(0,0,this.canvas.width,this.canvas.height),this.passEncoder.setVertexBuffer(0,this.positionBuffer),this.passEncoder.setVertexBuffer(1,this.colorBuffer),this.passEncoder.setIndexBuffer(this.indexBuffer),this.passEncoder.drawIndexed(3,1,0,0,0),this.passEncoder.endPass(),this.queue.submit([this.commandEncoder.finish()])}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vd2ViZ3B1LnRzIiwid2VicGFjazovLy8uL3JlbmRlcmVyLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIndpZHRoIiwiaGVpZ2h0Iiwic3RhcnQiLCJwb3NpdGlvbnMiLCJGbG9hdDMyQXJyYXkiLCJjb2xvcnMiLCJpbmRpY2VzIiwiVWludDE2QXJyYXkiLCJyZW5kZXIiLCJ0aGlzIiwiY29sb3JUZXh0dXJlIiwic3dhcGNoYWluIiwiZ2V0Q3VycmVudFRleHR1cmUiLCJjb2xvclRleHR1cmVWaWV3IiwiY3JlYXRlVmlldyIsImVuY29kZUNvbW1hbmRzIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiaW5pdGlhbGl6ZUFQSSIsInJlc2l6ZUJhY2tpbmdzIiwiaW5pdGlhbGl6ZVJlc291cmNlcyIsImVudHJ5IiwibmF2aWdhdG9yIiwiZ3B1IiwiYWRhcHRlciIsInJlcXVlc3RBZGFwdGVyIiwiZGV2aWNlIiwicmVxdWVzdERldmljZSIsInF1ZXVlIiwiZGVmYXVsdFF1ZXVlIiwiZSIsImNvbnNvbGUiLCJlcnJvciIsImNyZWF0ZUJ1ZmZlciIsImFyciIsInVzYWdlIiwiZGVzYyIsInNpemUiLCJieXRlTGVuZ3RoIiwiYnVmZmVyIiwiYnVmZmVyTWFwcGVkIiwiY3JlYXRlQnVmZmVyTWFwcGVkIiwic2V0IiwidW5tYXAiLCJwb3NpdGlvbkJ1ZmZlciIsIkdQVUJ1ZmZlclVzYWdlIiwiVkVSVEVYIiwiY29sb3JCdWZmZXIiLCJpbmRleEJ1ZmZlciIsIklOREVYIiwibG9hZFNoYWRlciIsInNoYWRlclBhdGgiLCJmZXRjaCIsIlJlcXVlc3QiLCJtZXRob2QiLCJ0aGVuIiwicmVzIiwiYXJyYXlCdWZmZXIiLCJVaW50MzJBcnJheSIsInZzbURlc2MiLCJjb2RlIiwidmVydE1vZHVsZSIsImNyZWF0ZVNoYWRlck1vZHVsZSIsImZzbURlc2MiLCJmcmFnTW9kdWxlIiwidmVydGV4U3RhdGUiLCJpbmRleEZvcm1hdCIsInZlcnRleEJ1ZmZlcnMiLCJhdHRyaWJ1dGVzIiwic2hhZGVyTG9jYXRpb24iLCJvZmZzZXQiLCJmb3JtYXQiLCJhcnJheVN0cmlkZSIsInN0ZXBNb2RlIiwicGlwZWxpbmVEZXNjIiwibGF5b3V0IiwiY3JlYXRlUGlwZWxpbmVMYXlvdXQiLCJiaW5kR3JvdXBMYXlvdXRzIiwidmVydGV4U3RhZ2UiLCJlbnRyeVBvaW50IiwiZnJhZ21lbnRTdGFnZSIsInByaW1pdGl2ZVRvcG9sb2d5IiwiY29sb3JTdGF0ZXMiLCJhbHBoYUJsZW5kIiwic3JjRmFjdG9yIiwiZHN0RmFjdG9yIiwib3BlcmF0aW9uIiwiY29sb3JCbGVuZCIsIndyaXRlTWFzayIsIkdQVUNvbG9yV3JpdGUiLCJBTEwiLCJkZXB0aFN0ZW5jaWxTdGF0ZSIsImRlcHRoV3JpdGVFbmFibGVkIiwiZGVwdGhDb21wYXJlIiwicmFzdGVyaXphdGlvblN0YXRlIiwiZnJvbnRGYWNlIiwiY3VsbE1vZGUiLCJwaXBlbGluZSIsImNyZWF0ZVJlbmRlclBpcGVsaW5lIiwiY29udGV4dCIsImdldENvbnRleHQiLCJzd2FwQ2hhaW5EZXNjIiwiR1BVVGV4dHVyZVVzYWdlIiwiT1VUUFVUX0FUVEFDSE1FTlQiLCJDT1BZX1NSQyIsImNvbmZpZ3VyZVN3YXBDaGFpbiIsImRlcHRoVGV4dHVyZURlc2MiLCJkZXB0aCIsImFycmF5TGF5ZXJDb3VudCIsIm1pcExldmVsQ291bnQiLCJzYW1wbGVDb3VudCIsImRpbWVuc2lvbiIsImRlcHRoVGV4dHVyZSIsImNyZWF0ZVRleHR1cmUiLCJkZXB0aFRleHR1cmVWaWV3IiwicmVuZGVyUGFzc0Rlc2MiLCJjb2xvckF0dGFjaG1lbnRzIiwiYXR0YWNobWVudCIsImxvYWRWYWx1ZSIsImciLCJiIiwiYSIsInN0b3JlT3AiLCJkZXB0aFN0ZW5jaWxBdHRhY2htZW50IiwiZGVwdGhMb2FkVmFsdWUiLCJkZXB0aFN0b3JlT3AiLCJzdGVuY2lsTG9hZFZhbHVlIiwic3RlbmNpbFN0b3JlT3AiLCJjb21tYW5kRW5jb2RlciIsImNyZWF0ZUNvbW1hbmRFbmNvZGVyIiwicGFzc0VuY29kZXIiLCJiZWdpblJlbmRlclBhc3MiLCJzZXRQaXBlbGluZSIsInNldFZpZXdwb3J0Iiwic2V0U2Npc3NvclJlY3QiLCJzZXRWZXJ0ZXhCdWZmZXIiLCJzZXRJbmRleEJ1ZmZlciIsImRyYXdJbmRleGVkIiwiZW5kUGFzcyIsInN1Ym1pdCIsImZpbmlzaCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFP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RixVQUNsQ3ZGLEtBQUt3SCxZQUFZRyxZQUFZLEVBQUcsRUFBRzNILEtBQUtaLE9BQU9HLE1BQU9TLEtBQUtaLE9BQU9JLE9BQVEsRUFBRyxHQUM3RVEsS0FBS3dILFlBQVlJLGVBQWUsRUFBRyxFQUFHNUgsS0FBS1osT0FBT0csTUFBT1MsS0FBS1osT0FBT0ksUUFDckVRLEtBQUt3SCxZQUFZSyxnQkFBZ0IsRUFBRzdILEtBQUtrQyxnQkFDekNsQyxLQUFLd0gsWUFBWUssZ0JBQWdCLEVBQUc3SCxLQUFLcUMsYUFDekNyQyxLQUFLd0gsWUFBWU0sZUFBZTlILEtBQUtzQyxhQUNyQ3RDLEtBQUt3SCxZQUFZTyxZQUFZLEVBQUcsRUFBRyxFQUFHLEVBQUcsR0FDekMvSCxLQUFLd0gsWUFBWVEsVUFFakJoSSxLQUFLa0IsTUFBTStHLE9BQU8sQ0FBRWpJLEtBQUtzSCxlQUFlWSIsImZpbGUiOiJ3ZWJncHUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgUmVuZGVyZXIgZnJvbSAnLi9yZW5kZXJlcic7XG5cbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnZngnKSBhcyBIVE1MQ2FudmFzRWxlbWVudDtcbmNhbnZhcy53aWR0aCA9IGNhbnZhcy5oZWlnaHQgPSA2NDA7XG5jb25zdCByZW5kZXJlciA9IG5ldyBSZW5kZXJlcihjYW52YXMpO1xucmVuZGVyZXIuc3RhcnQoKTtcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9ub2RlX21vZHVsZXMvQHdlYmdwdS90eXBlcy9pbmRleC5kLnRzXCIgLz5cblxuLy8g8J+TiCBQb3NpdGlvbiBWZXJ0ZXggQnVmZmVyIERhdGFcbmNvbnN0IHBvc2l0aW9ucyA9IG5ldyBGbG9hdDMyQXJyYXkoW1xuICAgIDEuMCwgLTEuMCwgMC4wLFxuICAgLTEuMCwgLTEuMCwgMC4wLFxuICAgIDAuMCwgMS4wLCAwLjBcbl0pO1xuXG4vLyDwn46oIENvbG9yIFZlcnRleCBCdWZmZXIgRGF0YVxuY29uc3QgY29sb3JzID0gbmV3IEZsb2F0MzJBcnJheShbXG4gICAgMS4wLCAwLjAsIDAuMCwgLy8g8J+UtFxuICAgIDAuMCwgMS4wLCAwLjAsIC8vIPCfn6JcbiAgICAwLjAsIDAuMCwgMS4wICAvLyDwn5S1XG5dKTtcblxuLy8g8J+XhO+4jyBJbmRleCBCdWZmZXIgRGF0YVxuY29uc3QgaW5kaWNlcyA9IG5ldyBVaW50MTZBcnJheShbIDAsIDEsIDIgXSk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlbmRlcmVyIHtcbiAgICBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuXG4gICAgLy8g4pqZ77iPIEFQSSBEYXRhIFN0cnVjdHVyZXNcbiAgICBhZGFwdGVyOiBHUFVBZGFwdGVyO1xuICAgIGRldmljZTogR1BVRGV2aWNlO1xuICAgIHF1ZXVlOiBHUFVRdWV1ZTtcblxuICAgIC8vIPCfjp7vuI8gRnJhbWUgQmFja2luZ3NcbiAgICBzd2FwY2hhaW46IEdQVVN3YXBDaGFpbjtcbiAgICBjb2xvclRleHR1cmU6IEdQVVRleHR1cmU7XG4gICAgY29sb3JUZXh0dXJlVmlldzogR1BVVGV4dHVyZVZpZXc7XG4gICAgZGVwdGhUZXh0dXJlOiBHUFVUZXh0dXJlO1xuICAgIGRlcHRoVGV4dHVyZVZpZXc6IEdQVVRleHR1cmVWaWV3O1xuXG4gICAgLy8g8J+UuiBSZXNvdXJjZXNcbiAgICBwb3NpdGlvbkJ1ZmZlcjogR1BVQnVmZmVyO1xuICAgIGNvbG9yQnVmZmVyOiBHUFVCdWZmZXI7XG4gICAgaW5kZXhCdWZmZXI6IEdQVUJ1ZmZlcjtcbiAgICB2ZXJ0TW9kdWxlOiBHUFVTaGFkZXJNb2R1bGU7XG4gICAgZnJhZ01vZHVsZTogR1BVU2hhZGVyTW9kdWxlO1xuICAgIHBpcGVsaW5lOiBHUFVSZW5kZXJQaXBlbGluZTtcblxuICAgIGNvbW1hbmRFbmNvZGVyOiBHUFVDb21tYW5kRW5jb2RlcjtcbiAgICBwYXNzRW5jb2RlcjogR1BVUmVuZGVyUGFzc0VuY29kZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihjYW52YXMpIHtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXM7XG4gICAgfVxuXG4gICAgLy8g8J+Pju+4jyBTdGFydCB0aGUgcmVuZGVyaW5nIGVuZ2luZVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICBpZiAoYXdhaXQgdGhpcy5pbml0aWFsaXplQVBJKCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzaXplQmFja2luZ3MoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVJlc291cmNlcygpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIPCfjJ8gSW5pdGlhbGl6ZSBXZWJHUFVcbiAgICBhc3luYyBpbml0aWFsaXplQVBJKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8g8J+PrSBFbnRyeSB0byBXZWJHUFVcbiAgICAgICAgICAgIGNvbnN0IGVudHJ5OiBHUFUgPSBuYXZpZ2F0b3IuZ3B1O1xuICAgICAgICAgICAgaWYgKCFlbnRyeSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g8J+UjCBQaHlzaWNhbCBEZXZpY2UgQWRhcHRlclxuICAgICAgICAgICAgdGhpcy5hZGFwdGVyID0gYXdhaXQgZW50cnkucmVxdWVzdEFkYXB0ZXIoKTtcblxuICAgICAgICAgICAgLy8g8J+SuyBMb2dpY2FsIERldmljZVxuICAgICAgICAgICAgdGhpcy5kZXZpY2UgPSBhd2FpdCB0aGlzLmFkYXB0ZXIucmVxdWVzdERldmljZSgpO1xuXG4gICAgICAgICAgICAvLyDwn5OmIFF1ZXVlXG4gICAgICAgICAgICB0aGlzLnF1ZXVlID0gdGhpcy5kZXZpY2UuZGVmYXVsdFF1ZXVlO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8g8J+NsSBJbml0aWFsaXplIHJlc291cmNlcyB0byByZW5kZXIgdHJpYW5nbGUgKGJ1ZmZlcnMsIHNoYWRlcnMsIHBpcGVsaW5lKVxuICAgIGFzeW5jIGluaXRpYWxpemVSZXNvdXJjZXMoKSB7XG4gICAgICAgIC8vIPCflLogQnVmZmVyc1xuICAgICAgICBsZXQgY3JlYXRlQnVmZmVyID0gKGFycjogRmxvYXQzMkFycmF5IHwgVWludDE2QXJyYXksIHVzYWdlOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIGxldCBkZXNjID0geyBzaXplOiBhcnIuYnl0ZUxlbmd0aCwgdXNhZ2UgfTtcbiAgICAgICAgICAgIGxldCBbIGJ1ZmZlciwgYnVmZmVyTWFwcGVkIF0gPSB0aGlzLmRldmljZS5jcmVhdGVCdWZmZXJNYXBwZWQoZGVzYyk7XG4gICAgICAgICAgICBgYDtcbiAgICAgICAgICAgIGNvbnN0IHdyaXRlQXJyYXkgPVxuICAgICAgICAgICAgICAgIGFyciBpbnN0YW5jZW9mIFVpbnQxNkFycmF5ID8gbmV3IFVpbnQxNkFycmF5KGJ1ZmZlck1hcHBlZCkgOiBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlck1hcHBlZCk7XG4gICAgICAgICAgICB3cml0ZUFycmF5LnNldChhcnIpO1xuICAgICAgICAgICAgYnVmZmVyLnVubWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gYnVmZmVyO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucG9zaXRpb25CdWZmZXIgPSBjcmVhdGVCdWZmZXIocG9zaXRpb25zLCBHUFVCdWZmZXJVc2FnZS5WRVJURVgpO1xuICAgICAgICB0aGlzLmNvbG9yQnVmZmVyID0gY3JlYXRlQnVmZmVyKGNvbG9ycywgR1BVQnVmZmVyVXNhZ2UuVkVSVEVYKTtcbiAgICAgICAgdGhpcy5pbmRleEJ1ZmZlciA9IGNyZWF0ZUJ1ZmZlcihpbmRpY2VzLCBHUFVCdWZmZXJVc2FnZS5JTkRFWCk7XG5cbiAgICAgICAgLy8g8J+Wje+4jyBTaGFkZXJzXG4gICAgICAgIGxldCBsb2FkU2hhZGVyID0gKHNoYWRlclBhdGg6IHN0cmluZykgPT5cbiAgICAgICAgICAgIGZldGNoKG5ldyBSZXF1ZXN0KHNoYWRlclBhdGgpLCB7IG1ldGhvZDogJ0dFVCcsIG1vZGU6ICdjb3JzJyB9KS50aGVuKChyZXMpID0+XG4gICAgICAgICAgICAgICAgcmVzLmFycmF5QnVmZmVyKCkudGhlbigoYXJyKSA9PiBuZXcgVWludDMyQXJyYXkoYXJyKSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgdnNtRGVzYzogYW55ID0geyBjb2RlOiBhd2FpdCBsb2FkU2hhZGVyKCcvYXNzZXRzL3NoYWRlcnMvdHJpYW5nbGUudmVydC5zcHYnKSB9O1xuICAgICAgICB0aGlzLnZlcnRNb2R1bGUgPSB0aGlzLmRldmljZS5jcmVhdGVTaGFkZXJNb2R1bGUodnNtRGVzYyk7XG5cbiAgICAgICAgY29uc3QgZnNtRGVzYzogYW55ID0geyBjb2RlOiBhd2FpdCBsb2FkU2hhZGVyKCcvYXNzZXRzL3NoYWRlcnMvdHJpYW5nbGUuZnJhZy5zcHYnKSB9O1xuICAgICAgICB0aGlzLmZyYWdNb2R1bGUgPSB0aGlzLmRldmljZS5jcmVhdGVTaGFkZXJNb2R1bGUoZnNtRGVzYyk7XG5cbiAgICAgICAgLy8g4pqX77iPIEdyYXBoaWNzIFBpcGVsaW5lXG5cbiAgICAgICAgLy8g8J+UoyBJbnB1dCBBc3NlbWJseVxuICAgICAgICBjb25zdCBwb3NpdGlvbkF0dHJpYkRlc2M6IEdQVVZlcnRleEF0dHJpYnV0ZURlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgICBzaGFkZXJMb2NhdGlvbjogMCwgLy8gW1thdHRyaWJ1dGUoMCldXVxuICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgZm9ybWF0OiAnZmxvYXQzJ1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjb2xvckF0dHJpYkRlc2M6IEdQVVZlcnRleEF0dHJpYnV0ZURlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgICBzaGFkZXJMb2NhdGlvbjogMSwgLy8gW1thdHRyaWJ1dGUoMSldXVxuICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgZm9ybWF0OiAnZmxvYXQzJ1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBwb3NpdGlvbkJ1ZmZlckRlc2M6IEdQVVZlcnRleEJ1ZmZlckxheW91dERlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiBbIHBvc2l0aW9uQXR0cmliRGVzYyBdLFxuICAgICAgICAgICAgYXJyYXlTdHJpZGU6IDQgKiAzLCAvLyBzaXplb2YoZmxvYXQpICogM1xuICAgICAgICAgICAgc3RlcE1vZGU6ICd2ZXJ0ZXgnXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNvbG9yQnVmZmVyRGVzYzogR1BVVmVydGV4QnVmZmVyTGF5b3V0RGVzY3JpcHRvciA9IHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFsgY29sb3JBdHRyaWJEZXNjIF0sXG4gICAgICAgICAgICBhcnJheVN0cmlkZTogNCAqIDMsIC8vIHNpemVvZihmbG9hdCkgKiAzXG4gICAgICAgICAgICBzdGVwTW9kZTogJ3ZlcnRleCdcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCB2ZXJ0ZXhTdGF0ZTogR1BVVmVydGV4U3RhdGVEZXNjcmlwdG9yID0ge1xuICAgICAgICAgICAgaW5kZXhGb3JtYXQ6ICd1aW50MTYnLFxuICAgICAgICAgICAgdmVydGV4QnVmZmVyczogWyBwb3NpdGlvbkJ1ZmZlckRlc2MsIGNvbG9yQnVmZmVyRGVzYyBdXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8g8J+MkSBEZXB0aFxuICAgICAgICBjb25zdCBkZXB0aFN0ZW5jaWxTdGF0ZTogR1BVRGVwdGhTdGVuY2lsU3RhdGVEZXNjcmlwdG9yID0ge1xuICAgICAgICAgICAgZGVwdGhXcml0ZUVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICBkZXB0aENvbXBhcmU6ICdsZXNzJyxcbiAgICAgICAgICAgIGZvcm1hdDogJ2RlcHRoMjRwbHVzLXN0ZW5jaWw4J1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIPCfpoQgVW5pZm9ybSBEYXRhXG4gICAgICAgIGNvbnN0IHBpcGVsaW5lTGF5b3V0RGVzYyA9IHsgYmluZEdyb3VwTGF5b3V0czogW10gfTtcbiAgICAgICAgY29uc3QgbGF5b3V0ID0gdGhpcy5kZXZpY2UuY3JlYXRlUGlwZWxpbmVMYXlvdXQocGlwZWxpbmVMYXlvdXREZXNjKTtcblxuICAgICAgICAvLyDwn46tIFNoYWRlciBTdGFnZXNcbiAgICAgICAgY29uc3QgdmVydGV4U3RhZ2UgPSB7XG4gICAgICAgICAgICBtb2R1bGU6IHRoaXMudmVydE1vZHVsZSxcbiAgICAgICAgICAgIGVudHJ5UG9pbnQ6ICdtYWluJ1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBmcmFnbWVudFN0YWdlID0ge1xuICAgICAgICAgICAgbW9kdWxlOiB0aGlzLmZyYWdNb2R1bGUsXG4gICAgICAgICAgICBlbnRyeVBvaW50OiAnbWFpbidcbiAgICAgICAgfTtcblxuICAgICAgICAvLyDwn4yAIENvbG9yL0JsZW5kIFN0YXRlXG4gICAgICAgIGNvbnN0IGNvbG9yU3RhdGU6IEdQVUNvbG9yU3RhdGVEZXNjcmlwdG9yID0ge1xuICAgICAgICAgICAgZm9ybWF0OiAnYmdyYTh1bm9ybScsXG4gICAgICAgICAgICBhbHBoYUJsZW5kOiB7XG4gICAgICAgICAgICAgICAgc3JjRmFjdG9yOiAnc3JjLWFscGhhJyxcbiAgICAgICAgICAgICAgICBkc3RGYWN0b3I6ICdvbmUtbWludXMtc3JjLWFscGhhJyxcbiAgICAgICAgICAgICAgICBvcGVyYXRpb246ICdhZGQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29sb3JCbGVuZDoge1xuICAgICAgICAgICAgICAgIHNyY0ZhY3RvcjogJ3NyYy1hbHBoYScsXG4gICAgICAgICAgICAgICAgZHN0RmFjdG9yOiAnb25lLW1pbnVzLXNyYy1hbHBoYScsXG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uOiAnYWRkJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHdyaXRlTWFzazogR1BVQ29sb3JXcml0ZS5BTExcbiAgICAgICAgfTtcblxuICAgICAgICAvLyDwn5+oIFJhc3Rlcml6YXRpb25cbiAgICAgICAgY29uc3QgcmFzdGVyaXphdGlvblN0YXRlOiBHUFVSYXN0ZXJpemF0aW9uU3RhdGVEZXNjcmlwdG9yID0ge1xuICAgICAgICAgICAgZnJvbnRGYWNlOiAnY3cnLFxuICAgICAgICAgICAgY3VsbE1vZGU6ICdub25lJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHBpcGVsaW5lRGVzYzogR1BVUmVuZGVyUGlwZWxpbmVEZXNjcmlwdG9yID0ge1xuICAgICAgICAgICAgbGF5b3V0LFxuXG4gICAgICAgICAgICB2ZXJ0ZXhTdGFnZSxcbiAgICAgICAgICAgIGZyYWdtZW50U3RhZ2UsXG5cbiAgICAgICAgICAgIHByaW1pdGl2ZVRvcG9sb2d5OiAndHJpYW5nbGUtbGlzdCcsXG4gICAgICAgICAgICBjb2xvclN0YXRlczogWyBjb2xvclN0YXRlIF0sXG4gICAgICAgICAgICBkZXB0aFN0ZW5jaWxTdGF0ZSxcbiAgICAgICAgICAgIHZlcnRleFN0YXRlLFxuICAgICAgICAgICAgcmFzdGVyaXphdGlvblN0YXRlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucGlwZWxpbmUgPSB0aGlzLmRldmljZS5jcmVhdGVSZW5kZXJQaXBlbGluZShwaXBlbGluZURlc2MpO1xuICAgIH1cblxuICAgIC8vIOKGme+4jyBSZXNpemUgc3dhcGNoYWluLCBmcmFtZSBidWZmZXIgYXR0YWNobWVudHNcbiAgICByZXNpemVCYWNraW5ncygpIHtcbiAgICAgICAgLy8g4puT77iPIFN3YXBjaGFpblxuICAgICAgICBpZiAoIXRoaXMuc3dhcGNoYWluKSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZXh0OiBHUFVDYW52YXNDb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnZ3B1cHJlc2VudCcpIGFzIGFueTtcbiAgICAgICAgICAgIGNvbnN0IHN3YXBDaGFpbkRlc2M6IEdQVVN3YXBDaGFpbkRlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgICAgICAgZGV2aWNlOiB0aGlzLmRldmljZSxcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICdiZ3JhOHVub3JtJyxcbiAgICAgICAgICAgICAgICB1c2FnZTogR1BVVGV4dHVyZVVzYWdlLk9VVFBVVF9BVFRBQ0hNRU5UIHwgR1BVVGV4dHVyZVVzYWdlLkNPUFlfU1JDXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zd2FwY2hhaW4gPSBjb250ZXh0LmNvbmZpZ3VyZVN3YXBDaGFpbihzd2FwQ2hhaW5EZXNjKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIPCfpJQgRGVwdGggQmFja2luZ1xuICAgICAgICBjb25zdCBkZXB0aFNpemUgPSB7XG4gICAgICAgICAgICB3aWR0aDogdGhpcy5jYW52YXMud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuY2FudmFzLmhlaWdodCxcbiAgICAgICAgICAgIGRlcHRoOiAxXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZGVwdGhUZXh0dXJlRGVzYzogR1BVVGV4dHVyZURlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgICBzaXplOiBkZXB0aFNpemUsXG4gICAgICAgICAgICBhcnJheUxheWVyQ291bnQ6IDEsXG4gICAgICAgICAgICBtaXBMZXZlbENvdW50OiAxLFxuICAgICAgICAgICAgc2FtcGxlQ291bnQ6IDEsXG4gICAgICAgICAgICBkaW1lbnNpb246ICcyZCcsXG4gICAgICAgICAgICBmb3JtYXQ6ICdkZXB0aDI0cGx1cy1zdGVuY2lsOCcsXG4gICAgICAgICAgICB1c2FnZTogR1BVVGV4dHVyZVVzYWdlLk9VVFBVVF9BVFRBQ0hNRU5UIHwgR1BVVGV4dHVyZVVzYWdlLkNPUFlfU1JDXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5kZXB0aFRleHR1cmUgPSB0aGlzLmRldmljZS5jcmVhdGVUZXh0dXJlKGRlcHRoVGV4dHVyZURlc2MpO1xuICAgICAgICB0aGlzLmRlcHRoVGV4dHVyZVZpZXcgPSB0aGlzLmRlcHRoVGV4dHVyZS5jcmVhdGVWaWV3KCk7XG4gICAgfVxuXG4gICAgLy8g4pyN77iPIFdyaXRlIGNvbW1hbmRzIHRvIHNlbmQgdG8gdGhlIEdQVVxuICAgIGVuY29kZUNvbW1hbmRzKCkge1xuICAgICAgICBsZXQgY29sb3JBdHRhY2htZW50OiBHUFVSZW5kZXJQYXNzQ29sb3JBdHRhY2htZW50RGVzY3JpcHRvciA9IHtcbiAgICAgICAgICAgIGF0dGFjaG1lbnQ6IHRoaXMuY29sb3JUZXh0dXJlVmlldyxcbiAgICAgICAgICAgIGxvYWRWYWx1ZTogeyByOiAwLCBnOiAwLCBiOiAwLCBhOiAxIH0sXG4gICAgICAgICAgICBzdG9yZU9wOiAnc3RvcmUnXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZGVwdGhBdHRhY2htZW50OiBHUFVSZW5kZXJQYXNzRGVwdGhTdGVuY2lsQXR0YWNobWVudERlc2NyaXB0b3IgPSB7XG4gICAgICAgICAgICBhdHRhY2htZW50OiB0aGlzLmRlcHRoVGV4dHVyZVZpZXcsXG4gICAgICAgICAgICBkZXB0aExvYWRWYWx1ZTogMSxcbiAgICAgICAgICAgIGRlcHRoU3RvcmVPcDogJ3N0b3JlJyxcbiAgICAgICAgICAgIHN0ZW5jaWxMb2FkVmFsdWU6ICdsb2FkJyxcbiAgICAgICAgICAgIHN0ZW5jaWxTdG9yZU9wOiAnc3RvcmUnXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgcmVuZGVyUGFzc0Rlc2M6IEdQVVJlbmRlclBhc3NEZXNjcmlwdG9yID0ge1xuICAgICAgICAgICAgY29sb3JBdHRhY2htZW50czogWyBjb2xvckF0dGFjaG1lbnQgXSxcbiAgICAgICAgICAgIGRlcHRoU3RlbmNpbEF0dGFjaG1lbnQ6IGRlcHRoQXR0YWNobWVudFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY29tbWFuZEVuY29kZXIgPSB0aGlzLmRldmljZS5jcmVhdGVDb21tYW5kRW5jb2RlcigpO1xuXG4gICAgICAgIC8vIPCflozvuI8gRW5jb2RlIGRyYXdpbmcgY29tbWFuZHNcbiAgICAgICAgdGhpcy5wYXNzRW5jb2RlciA9IHRoaXMuY29tbWFuZEVuY29kZXIuYmVnaW5SZW5kZXJQYXNzKHJlbmRlclBhc3NEZXNjKTtcbiAgICAgICAgdGhpcy5wYXNzRW5jb2Rlci5zZXRQaXBlbGluZSh0aGlzLnBpcGVsaW5lKTtcbiAgICAgICAgdGhpcy5wYXNzRW5jb2Rlci5zZXRWaWV3cG9ydCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0LCAwLCAxKTtcbiAgICAgICAgdGhpcy5wYXNzRW5jb2Rlci5zZXRTY2lzc29yUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgdGhpcy5wYXNzRW5jb2Rlci5zZXRWZXJ0ZXhCdWZmZXIoMCwgdGhpcy5wb3NpdGlvbkJ1ZmZlcik7XG4gICAgICAgIHRoaXMucGFzc0VuY29kZXIuc2V0VmVydGV4QnVmZmVyKDEsIHRoaXMuY29sb3JCdWZmZXIpO1xuICAgICAgICB0aGlzLnBhc3NFbmNvZGVyLnNldEluZGV4QnVmZmVyKHRoaXMuaW5kZXhCdWZmZXIpO1xuICAgICAgICB0aGlzLnBhc3NFbmNvZGVyLmRyYXdJbmRleGVkKDMsIDEsIDAsIDAsIDApO1xuICAgICAgICB0aGlzLnBhc3NFbmNvZGVyLmVuZFBhc3MoKTtcblxuICAgICAgICB0aGlzLnF1ZXVlLnN1Ym1pdChbIHRoaXMuY29tbWFuZEVuY29kZXIuZmluaXNoKCkgXSk7XG4gICAgfVxuXG4gICAgcmVuZGVyID0gKCkgPT4ge1xuICAgICAgICAvLyDij60gQWNxdWlyZSBuZXh0IGltYWdlIGZyb20gc3dhcGNoYWluXG4gICAgICAgIHRoaXMuY29sb3JUZXh0dXJlID0gdGhpcy5zd2FwY2hhaW4uZ2V0Q3VycmVudFRleHR1cmUoKTtcbiAgICAgICAgdGhpcy5jb2xvclRleHR1cmVWaWV3ID0gdGhpcy5jb2xvclRleHR1cmUuY3JlYXRlVmlldygpO1xuXG4gICAgICAgIC8vIPCfk6YgV3JpdGUgYW5kIHN1Ym1pdCBjb21tYW5kcyB0byBxdWV1ZVxuICAgICAgICB0aGlzLmVuY29kZUNvbW1hbmRzKCk7XG5cbiAgICAgICAgLy8g4p6/IFJlZnJlc2ggY2FudmFzXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJlbmRlcik7XG4gICAgfTtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=